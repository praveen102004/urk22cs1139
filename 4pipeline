docker-compose.yml


version: '3.8'

services:
  jenkins:
    image: jenkins/jenkins:lts
    container_name: jenkins
    restart: unless-stopped
    ports:
      - "8080:8080"
      - "50000:50000"
    volumes:
      - jenkins_home:/var/jenkins_home
      - /var/run/docker.sock:/var/run/docker.sock

volumes:
  jenkins_home:
    driver: local










pipeline {
    agent any
    stages {
        stage('Generate site') {
            steps {
                script {
                    sh 'rm -rf site || true'
                    sh 'mkdir -p site/assets'
                    writeFile file: 'site/index.html', text: """
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Karunya University — Simple Site</title>
    <link rel="stylesheet" href="assets/style.css"/>
</head>
<body>
    <header class="site-header">
        <div class="container">
            <h1>Karunya University</h1>
            <p class="tagline">Values — Knowledge — Service</p>
        </div>
    </header>
    <main class="container">
        <section class="card">
            <h2>About Karunya University</h2>
            <p>Karunya Institute of Technology and Sciences is a leading centre for higher education in India.</p>
        </section>
    </main>
    <footer class="site-footer container">
        <p>&copy; ${new Date().format('yyyy')} Karunya University — Generated by Jenkins</p>
    </footer>
</body>
</html>
"""
                }
            }
        }
    }
}


docker compose up -d

docker exec jenkins cat /var/jenkins_home/secrets/initialAdminPassword
